<!--

Copyright (c) 2024 Marcos de Oliveira Capristo
Todos os direitos reservados.

MYREPORT é um projeto independente.
Oferece um ambiente para edição de laudos periciais,
voltado especialmente para Peritos Criminais Oficiais do Estado de São Paulo.
Idealizado e inicialmente desenvolvido pelo Perito Criminal Marcos de Oliveira Capristo.
Contato: marcos.moc@policiacientifica.sp.gov.br | (19) 9 8231-2774

-->

<!--

FRAGMENTO DE FORMULÁRIO - BOTTOM

-->


<div class="form-group d-flex justify-content-between">
    <div class="form-group flex-fill mr-2">
        <label for="considerations"><h4>Considerações</h4></label>
        <textarea class="form-control" id="considerations" name="considerations" rows="3" placeholder="Elementos de interesse investigativo, como por exemplo, presença de câmeras de vigilância.">{{ report.considerations }}</textarea>
    </div>
</div>

<div class="form-group d-flex justify-content-between">
    <div class="form-group flex-fill mr-2">
        <label for="conclusions"><h4>Conclusão</h4></label>
        <textarea class="form-control" id="conclusions" name="conclusions" rows="3" placeholder="Conclusão da análise, como por exemplo: Constatado furto mediante escalada.">{{ report.conclusion }}</textarea>
    </div>
</div>

{% if report.id %}
    <input type="hidden" name="report_id" value="{{ report.id }}">
{% endif %}

<button type="submit" class="btn btn-primary" id='enviar'>Enviar</button>

</form>

{% if message %}
    <div class="alert alert-info">{{ message }}</div>
{% endif %}

<script>
    document.addEventListener('DOMContentLoaded', function() {

        const submitButton = document.querySelector('#enviar');
        
        submitButton.addEventListener('click', function(){
            event.preventDefault();
            if(checkForm()){
                //testLocal();
                //alert('tudo checado!');
                reportNumber.value = formatStringWithYear(reportNumber.value, desigatedDate.value);
                protocolNumber.value = formatStringWithYear(protocolNumber.value, desigatedDate.value);
                policeReportNumber.value = formatStringWithYear(policeReportNumber.value, desigatedDate.value);
                form.submit();
                //alert(listForLocalContext());
                //alert('formulário enviado!');
            };
        });

        testandoInputs();

});    

</script>